# Custom alias functions
maccopy() {
    cat $1 | pbcopy
}

xclipCopy() {
    cat $1 | xclip -selection clipboard
}

prFunc() {
    previous_dir=$(pwd);
    cd /sites/ycharts;

    github_base_url="https://github.com/ycharts/ycharts/compare/develop...jls83:";
    current_branch=$(git branch | grep \* | cut -d ' ' -f2);
    open -na "Google Chrome" "$github_base_url$current_branch";

    if [[ $1 != 'no' ]]; then
        vim ~/pr.md;
        cat ~/pr.md | pbcopy;
    fi

    cd $previous_dir;
}

openVgShell() {
    previous_dir=$(pwd);
    cd /sites/ycharts;
    vagrant ssh -- -t \
        "source /home/vagrant/.virtualenvs/ycharts/bin/activate;" \
        "python /sites/ycharts/manage.py shell_plus";
    cd $previous_dir;
}

gitQuicksave() {
    MSG=$(git checkout -b tmp 2>&1)
    if [[ $MSG == "fatal: A branch named 'tmp' already exists." ]]; then
        echo "'tmp' already exists; deleting";
        git branch -D tmp;
        git checkout -b tmp;
    fi
}

case `uname` in
    "Darwin")
        source ~/.bash_profile

        export PATH="/usr/local/opt/mysql@5.7/bin:$PATH"
        export ZSH="/Users/jls83/.oh-my-zsh"

        alias npr=prFunc
        alias vgs=openVgShell

        alias vg='cd /sites/ycharts && vagrant ssh'
        alias ycs='cd /sites/ycharts'
        alias gitr='cd /sites/ycharts && git checkout develop && git pull origin develop'

        alias wcp=maccopy
        ;;

    "Linux")
        export PATH="/home/jls83/.pyenv/bin:$PATH"
        export ZSH="/home/jls83/.oh-my-zsh"

        alias ipython='python -m IPython'
        alias wcp=xclipCopy

        # PyEnv Junk
        eval "$(pyenv init -)"
        eval "$(pyenv virtualenv-init -)"
        export PYENV_ROOT="/home/jls83/.pyenv"
        export PIPENV_PYTHON="$PYENV_ROOT/shims/python"
        ;;
esac

# Both Linux and Mac have themes called `crcandy_edit`
ZSH_THEME="crcandy_edit"

plugins=(
  git
)

source $ZSH/oh-my-zsh.sh

alias qs=gitQuicksave
